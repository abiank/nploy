#!/usr/bin/env node

var program = require('commander')
function range (val) {
  return val.split('..').map(function (el) {
    return parseInt(el, 10)
  })
}

program
  .version('0.1.2')
  .option('-r, --range <a>..<b>', 'Port range [7000..7099]', range)
  .option('-t, --time <seconds>', 'Time to idle [15]', 15, parseInt)
  .option('-p, --port <port>', 'Port to listen to [80]', 80, parseInt)
  .option('-H, --host <host>', 'Host to listen to [0.0.0.0]', '0.0.0.0')
  .option('-c, --config <config>', 'Config file [./nploy.cfg]', './nploy.cfg')
  .option('-d, --dir <dir>', 'Current working dir [.]', '.')
  .parse(process.argv)

var nploy = require('../lib/nploy');
nploy.start(program);
